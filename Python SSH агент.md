[[Python]]
#ssh

1. –ó–∞–ø–æ–º–∏–Ω–∞—Ç—å SSH-–∫–ª—é—á –Ω–∞ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—å –∫–ª—é—á –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞
```python
#!/bin/bash

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SSH-–∞–≥–µ–Ω—Ç–∞
setup_secure_ssh_agent() {
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è SSH-–∫–ª—é—á–∞
    if [ ! -f ~/.ssh/id_rsa ]; then
        echo "‚ö†Ô∏è SSH-–∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ ~/.ssh/id_rsa"
        return 1
    fi

    # –ó–∞–ø—É—Å–∫ SSH-–∞–≥–µ–Ω—Ç–∞
    eval "$(ssh-agent -s)"

    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ —Å –∑–∞–ø—Ä–æ—Å–æ–º –ø–∞—Ä–æ–ª—è
    ssh-add -K ~/.ssh/id_rsa

    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ª–æ–≤—É—à–∫–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–ª—é—á–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞
    trap 'ssh-agent -k && echo "üîí SSH-–∞–≥–µ–Ω—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∫–ª—é—á —É–¥–∞–ª–µ–Ω"' EXIT INT TERM
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ SSH
test_ssh_connection() {
    ssh -T git@github.com && echo "‚úÖ SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ" || echo "‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º"
}

# –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
main() {
    setup_secure_ssh_agent
    if [ $? -eq 0 ]; then
        test_ssh_connection
        # –ó–¥–µ—Å—å –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å–∫—Ä–∏–ø—Ç–∞
    fi
}

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
main
```



–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏—è:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞**:
    - `ssh-add -K` –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–ª—é—á —Å –∑–∞–ø—Ä–æ—Å–æ–º –ø–∞—Ä–æ–ª—è
    - –ö–ª—é—á –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ SSH-–∞–≥–µ–Ω—Ç–∞
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**:
    - `trap 'ssh-agent -k'` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫—É –∞–≥–µ–Ω—Ç–∞ –ø—Ä–∏ –ª—é–±–æ–º —Ç–∏–ø–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞
    - –°—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏:
        - –®—Ç–∞—Ç–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
        - –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (Ctrl+C)
        - –°–∏—Å—Ç–µ–º–Ω–æ–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**:
    - –§—É–Ω–∫—Ü–∏—è `test_ssh_connection()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å SSH

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å SSH-–∫–ª—é—á
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞ `600` –Ω–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
```bash
chmod 600 ~/.ssh/id_rsa
```
–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø—Ä–∞–≤ `600`:

- `6` –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞: —á—Ç–µ–Ω–∏–µ (`4`) + –∑–∞–ø–∏—Å—å (`2`) = `6`
- `0` –¥–ª—è –≥—Ä—É–ø–ø—ã: –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤
- `0` –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö: –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

- –í—ã–ø–æ–ª–Ω—è–π—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è SSH-–∫–ª—é—á–∞
- –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–ª—é—á—É (id_rsa), –ù–ï –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É (id_rsa.pub)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å–Ω—É—é –∑–∞—â–∏—Ç—É –¥–ª—è SSH-–∫–ª—é—á–∞

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç:

- –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ SSH-–∫–ª—é—á–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

–í–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ —Å–≤–æ–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `main()`.